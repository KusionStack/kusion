# 资源状态白盒化框架

k8s 使用者在提交变更后往往需要了解模型的调和步骤，逐步模型观察状态。为了使得用户更易于理解、上手，Kusion 提供对用户变更的模型及其关联模型的变更追踪、链路可视化、live 对比、关键资源可视化、异常定位等功能，帮助用户低成本玩转云原生实践。

## 过程化
面向终态是云原生系统重要的设计理念，面向终态的调和机制支撑了离散模型的声明式控制，但单纯的面向终态在实践中会造成过程不可控等问题，无法满足企业落地需求。Kusion 通过子集选择将待操作资源分批，通过工作流将分批后的资源操作分段，并支持并行、串行、暂停、恢复、取消等控制操作，从而通过外带的控制能力结合无限循环的调和支持过程化的面向终态。

## 状态可视化

### 模型变更的 live diff
Kusion 支持实时地显示模型状态变化之间的差异，这种差异可以以 Json 或是 Yaml 的差异对比（diff）的方式展现出来。其背后的逻辑等同于 kubectl 的 diff 子命令。

### 关键资源状态可视化
Kusion 支持实时地显示模型当前状态，这些状态信息通过 kusion 内部 monitor 不断监控 k8s runtime 获取。

## 自动化
Kusion支持根据模型的不同状态自动 异常定位。

对于正常情况，需要了解对链路中模型的状态判断方式，并了解合理的状态判断条件。

以 deployment 为例，如果以社区方式判断则判断 status 中 available 为 true，但如果以较严格的条件判断需要三个 replica 严格相等，加上各个模型存在差异，这使得使用学习路径陡峭提升。

对于异常情况存在类似的情况，往往需要对模型较为了解，并通过多个关联模型关键状态的判断来对判断异常原因。同时对于已提交的资源，Kusion 将提供资源状态白屏展示，降低用户识别成本。
